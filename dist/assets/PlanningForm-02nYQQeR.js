import{e as k,A as S,d as F,u as C,r as m,j as e,L as o,I as u,B as v,t as E}from"./index-Bd_g5yr_.js";import{z as n,u as z,a as P,F as W,C as p,b as x,h as A}from"./external-QyOfrcf0.js";import{P as H}from"./PageBreadCrumb-CllaJxAj.js";import{C as R}from"./ComponentCard-CuEWkNls.js";import{S as w,R as d}from"./Radio-VnnyHtBn.js";import"./index-YGHbPIAQ.js";import"./utils-HNMyEq71.js";const q=n.object({id:n.number().optional(),start_time:n.string().nonempty("Start time is required"),end_time:n.string().nonempty("End time is required"),work_saturday:n.string(),work_sunday:n.string(),forecast_horizon:n.string().nonempty("Forecast Horizon is required"),created_at:n.number().optional(),updated_at:n.number().optional()});async function B(s){var i;console.log(s);try{return(s.id?await k.put(`/planning/${s.id}`,s):await k.post("/planning",s)).data}catch(t){throw t instanceof S&&((i=t.response)!=null&&i.data)?t.response.data:t}}async function T(s){return console.log(s),{id:1,start_time:"08:00",end_time:"17:00",work_saturday:"0",work_sunday:"1",forecast_horizon:"3 months",created_at:Date.now(),updated_at:Date.now()}}function U(){const{id:s}=F(),i=C(),[t,h]=m.useState("0"),[g,y]=m.useState("0"),{handleSubmit:f,control:l,setError:b,reset:c}=z({defaultValues:{start_time:"",end_time:"",work_saturday:"",work_sunday:"",forecast_horizon:""},resolver:P(q)});m.useEffect(()=>{s&&T(s).then(a=>{c(a),h(a.work_saturday),y(a.work_sunday)})},[s,c]);const j=a=>{h(a)},_=a=>{y(a)},N=async a=>{try{E.promise(B(a),{loading:s?"Updating Planning...":"Creating Planning...",success:()=>(setTimeout(()=>{i(`/planning/${s}`)},2e3),s?"Planning updated successfully":"Planning created successfully!"),error:r=>A(r,b)})}catch(r){console.log("Error upon Submitting",r)}};return e.jsxs(e.Fragment,{children:[e.jsx(H,{pageTitle:"Supplier"}),e.jsxs(R,{title:s?"Edit Supplier":"Add Supplier",children:[e.jsx("form",{id:"form-planning",onSubmit:f(N),children:e.jsx(W,{children:e.jsxs("div",{className:"grid grid-cols-4 gap-6 ",children:[e.jsxs("div",{className:"col-span-4 grid grid-cols-subgrid gap-6",children:[e.jsx(p,{name:"start_time",control:l,render:({field:a,fieldState:r})=>e.jsxs(x,{"data-invalid":r.invalid,children:[e.jsx(o,{htmlFor:"input",children:"Working Hours ( Start - End )"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{...a,type:"time",id:"tm",name:"tm"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message}),e.jsx("span",{className:"absolute text-gray-500 -translate-y-1/2 pointer-events-none right-3 top-1/2 dark:text-gray-400",children:e.jsx(w,{className:"size-6"})})]}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})}),e.jsx(p,{name:"end_time",control:l,render:({field:a,fieldState:r})=>e.jsxs(x,{"data-invalid":r.invalid,children:[e.jsx(o,{htmlFor:"input",children:"Â "}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{...a,type:"time",id:"tm",name:"tm"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message}),e.jsx("span",{className:"absolute text-gray-500 -translate-y-1/2 pointer-events-none right-3 top-1/2 dark:text-gray-400",children:e.jsx(w,{className:"size-6"})})]})]})})]}),e.jsxs("div",{className:"col-span-4 grid grid-cols-subgrid gap-6 mt-5",children:[e.jsxs("div",{className:"grid",children:[e.jsx(o,{htmlFor:"work_saturday_no",children:"Able to Work on Saturday"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-8",children:[e.jsx(d,{id:"work_saturday_no",name:"work_saturday",value:"0",checked:t==="0",onChange:j,label:"NO"}),e.jsx(d,{id:"work_saturday_yes",name:"work_saturday",value:"1",checked:t==="1",onChange:j,label:"YES"})]})]}),e.jsxs("div",{className:"grid",children:[e.jsx(o,{htmlFor:"work_sunday",children:"Able to Work on Sunday"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-8",children:[e.jsx(d,{id:"work_sunday_no",name:"work_sunday",value:"0",checked:g==="0",onChange:_,label:"NO"}),e.jsx(d,{id:"work_sunday_yes",name:"work_sunday",value:"1",checked:g==="1",onChange:_,label:"YES"})]})]})]}),e.jsx("div",{className:"col-span-2 grid gap-6  mt-5",children:e.jsx(p,{name:"forecast_horizon",control:l,render:({field:a,fieldState:r})=>e.jsxs(x,{"data-invalid":r.invalid,children:[e.jsx(o,{htmlFor:"input",children:"Forecast Horizon"}),e.jsx(u,{...a,type:"text",id:"input",name:"forecast_horizon",placeholder:"Enter Forecast Horizon"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})})]})})}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(v,{variant:"outline",onClick:()=>c(),children:"Reset"}),e.jsx(v,{type:"submit",form:"form-planning",children:"Submit"})]})]})]})}export{U as default};
