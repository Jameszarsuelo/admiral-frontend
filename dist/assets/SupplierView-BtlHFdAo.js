import{j as e,B as c,u as j,r as m,S as v}from"./index-Bd_g5yr_.js";import{P as y}from"./PageBreadCrumb-CllaJxAj.js";import{B as N,A as w,u as b,D as k,M as S}from"./index-CZzhE_lX.js";import{d as D,f as C}from"./supplier_api-B1YJQngG.js";import"./table-Crs5lvSB.js";import"./utils-HNMyEq71.js";import"./index-BT1M0go5.js";import"./index-YGHbPIAQ.js";const z=(t,d,r)=>[{accessorKey:"salutation",accessorFn:s=>s.user.user_info.salutation,header:()=>e.jsx("div",{className:"ml-4",children:"Salutation"}),cell:({row:s})=>e.jsxs("div",{className:"capitalize dark:text-white ml-4",children:[s.getValue("salutation"),"."]})},{accessorKey:"firstname",accessorFn:s=>s.user.firstname,header:()=>e.jsx("div",{className:"ml-4",children:"Firstname"}),cell:({row:s})=>e.jsx("div",{className:"capitalize dark:text-white ml-4",children:s.getValue("firstname")})},{accessorKey:"lastname",accessorFn:s=>s.user.lastname,header:()=>e.jsx("div",{className:"ml-4",children:"Lastname"}),cell:({row:s})=>e.jsx("div",{className:"capitalize dark:text-white ml-4",children:s.getValue("lastname")})},{accessorKey:"email",accessorFn:s=>s.user.email,header:({column:s})=>e.jsxs(N,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["Email",e.jsx(w,{})]}),cell:({row:s})=>e.jsx("div",{className:" dark:text-white ml-4",children:s.getValue("email")})},{accessorKey:"mobile",accessorFn:s=>s.user.user_info.mobile,header:()=>e.jsx("div",{className:"ml-4",children:"Mobile"}),cell:({row:s})=>e.jsx("div",{className:"capitalize dark:text-white ml-4",children:s.getValue("mobile")})},{accessorKey:"address",header:()=>e.jsx("div",{className:"ml-4",children:"Address"}),cell:({row:s})=>e.jsxs("div",{className:"capitalize dark:text-white ml-4",children:[s.original.user.user_info.city,", ",s.original.user.user_info.country,","," ",s.original.user.user_info.postcode]})},{id:"actions",header:()=>e.jsx("div",{children:"Actions"}),cell:({row:s})=>{const a=s.original,i=l=>{t(`/suppliers/edit/${l}`)},n=l=>{d(l),r()};return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{onClick:()=>i(a.id),variant:"primary",size:"sm",children:"Edit"}),e.jsx(c,{onClick:()=>n(a.id),variant:"danger",size:"sm",children:"Delete"})]})}}];function _(){const t=j(),[d,r]=m.useState(!1),[s,a]=m.useState(null),[i,n]=m.useState(!1),{data:l,isLoading:x,refetch:u}=b({queryKey:["supplier-data"],queryFn:async()=>await C(),refetchInterval:1e3*60*5,refetchIntervalInBackground:!0,staleTime:500,gcTime:2e4}),p=o=>{a(o),r(!0)},h=async()=>{if(s!==null){n(!0);try{await D(s),await u(),r(!1),a(null)}catch(o){console.error("Error deleting IPC:",o)}finally{n(!1)}}},g=()=>{i||(r(!1),a(null))},f=z(t,p,u);return e.jsxs(e.Fragment,{children:[e.jsx(y,{pageTitle:"Suppliers"}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white px-5 pb-5 pt-5 dark:border-gray-800 dark:bg-white/[0.03] sm:px-6 sm:pt-6",children:[e.jsxs("div",{className:"flex flex-col gap-5 mb-6 sm:flex-row sm:justify-between",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white/90",children:"Suppliers"}),e.jsx("p",{className:"mt-1 text-gray-500 text-theme-sm dark:text-gray-400",children:"List of all Suppliers and their details."})]}),e.jsx("div",{className:"flex shrink-0 items-center gap-2",children:e.jsx(c,{size:"sm",onClick:()=>t("/suppliers/new"),children:"Add New Supplier"})})]}),e.jsx("div",{className:"max-w-full overflow-x-auto custom-scrollbar",children:e.jsx("div",{className:"min-w-[1000px] xl:min-w-full px-2",children:!x&&l?e.jsx(k,{columns:f,data:l}):e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(v,{size:"lg"})})})})]})}),e.jsx(S,{isOpen:d,onClose:g,className:"w-lg m-4",children:e.jsx("div",{className:"relative w-full p-4 overflow-y-auto bg-white no-scrollbar rounded-3xl dark:bg-gray-900 lg:p-11",children:e.jsxs("div",{className:"px-2 pr-14",children:[e.jsx("h4",{className:"mb-2 text-2xl font-semibold text-gray-800 dark:text-white/90",children:"Delete Confirmation"}),e.jsx("p",{className:"mb-6 text-sm text-gray-500 dark:text-gray-400 lg:mb-7",children:"Are you sure to delete this Supplier?"}),e.jsx(c,{size:"sm",variant:"danger",onClick:()=>h(),children:i?"Deleting...":"Confirm Delete"})]})})})]})}export{_ as default};
