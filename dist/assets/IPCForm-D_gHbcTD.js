import{d as b,u as C,r as j,j as e,S as f,L as a,I as l,B as x,t as F}from"./index-Bd_g5yr_.js";import{u as N,a as E,h as _,F as P,C as t,b as i}from"./external-QyOfrcf0.js";import{P as I}from"./PageBreadCrumb-CllaJxAj.js";import{C as w}from"./ComponentCard-CuEWkNls.js";import{S as v,P as B,a as k}from"./Switch-BirVSo3m.js";import{S as L,U as A}from"./UserFormSchema-X7zWze6p.js";import{a as M,u as T}from"./ipc_api-CKGuSbHV.js";import"./index-YGHbPIAQ.js";import"./utils-HNMyEq71.js";import"./index-BT1M0go5.js";const U=[{code:"UK",label:"+44"},{code:"PH",label:"+63"}],D=[{value:0,label:"SMS"},{value:1,label:"Email"}],O=[{value:"mr",label:"Mr."},{value:"ms",label:"Ms."},{value:"mrs",label:"Mrs."},{value:"dr",label:"Dr."}];function X(){const{id:o}=b(),h=C(),[u,p]=j.useState(!1),{handleSubmit:y,control:n,setError:c,reset:m}=N({defaultValues:{salutation:"",firstname:"",lastname:"",email:"",phone:"",mobile:"+44",two_fa_enabled:!1,two_fa_type:0,user_type_id:0,user_profile_id:0,address_line_1:"",address_line_2:"",address_line_3:"",city:"",county:"",country:"",postcode:""},resolver:E(A)});j.useEffect(()=>{o&&(p(!0),M(o).then(s=>{const r=s.user;m({id:s.id,firstname:r.firstname,lastname:r.lastname,email:r.email,two_fa_enabled:!!r.two_fa_enabled,two_fa_type:r.two_fa_type,user_type_id:r.user_type_id,user_profile_id:r.user_profile_id,salutation:r.user_info.salutation,phone:r.user_info.phone||"",mobile:r.user_info.mobile,address_line_1:r.user_info.address_line_1||"",address_line_2:r.user_info.address_line_2||"",address_line_3:r.user_info.address_line_3||"",city:r.user_info.city,county:r.user_info.county,country:r.user_info.country,postcode:r.user_info.postcode})}).catch(s=>_(s,c)).finally(()=>{p(!1)}))},[o,m,c]);async function g(s){F.promise(T(s),{loading:o?"Updating IPC...":"Creating IPC...",success:()=>(setTimeout(()=>{h("/invoice-payment-clerk")},2e3),o?"IPC updated successfully!":"IPC created successfully!"),error:r=>_(r,c)})}return e.jsxs(e.Fragment,{children:[e.jsx(I,{pageTitle:"Invoice Payment Clerk"}),e.jsxs(w,{title:o?"Edit IPC":"Add IPC",children:[u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(f,{size:"lg"})}):e.jsx("form",{id:"form-ipc",onSubmit:y(g),children:e.jsx(P,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-6 ",children:[e.jsx("div",{children:e.jsx(t,{name:"salutation",control:n,render:({field:s,fieldState:r})=>e.jsxs(i,{"data-invalid":r.invalid,children:[e.jsx(a,{htmlFor:"salutation",children:"Salutation"}),e.jsx(v,{value:s.value,options:O,placeholder:"Select Salutation",onChange:d=>s.onChange(d),onBlur:s.onBlur,className:"dark:bg-dark-900"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(t,{name:"firstname",control:n,render:({field:s,fieldState:r})=>e.jsxs(i,{"data-invalid":r.invalid,children:[e.jsx(a,{htmlFor:"input",children:"First Name"}),e.jsx(l,{...s,type:"text",id:"input",name:"firstname",placeholder:"Enter first name"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(t,{name:"lastname",control:n,render:({field:s,fieldState:r})=>e.jsxs(i,{"data-invalid":r.invalid,children:[e.jsx(a,{htmlFor:"lastname",children:"Last Name"}),e.jsx(l,{...s,type:"text",id:"lastname",name:"lastname",placeholder:"Enter last name"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(t,{name:"email",control:n,render:({field:s,fieldState:r})=>e.jsxs(i,{"data-invalid":r.invalid,children:[e.jsx(a,{htmlFor:"input",children:"Email"}),e.jsx(l,{...s,type:"text",id:"input",name:"email",placeholder:"e.g. john@test.com"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(t,{name:"mobile",control:n,render:({field:s,fieldState:r})=>e.jsxs(i,{"data-invalid":r.invalid,children:[e.jsx(a,{htmlFor:"input",children:"Mobile"}),e.jsx(B,{value:s.value,countries:U,selectPosition:"start",placeholder:"+44 7123 456789",onChange:d=>{s.onChange(d)},onBlur:s.onBlur}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(t,{name:"phone",control:n,render:({field:s,fieldState:r})=>e.jsxs(i,{"data-invalid":r.invalid,children:[e.jsx(a,{htmlFor:"phone",children:"Phone"}),e.jsx(l,{...s,type:"text",id:"phone",name:"phone",placeholder:"Enter phone number"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(t,{name:"two_fa_enabled",control:n,render:({field:s,fieldState:r})=>e.jsxs(i,{"data-invalid":r.invalid,children:[e.jsx(a,{htmlFor:"input",children:"Multi-factor authentication"}),e.jsx(k,{checked:s.value,onCheckedChange:s.onChange,label:"Enable multi-factor authentication to secure your account."})]})})}),e.jsx("div",{children:e.jsx(t,{name:"two_fa_type",control:n,render:({field:s,fieldState:r})=>e.jsxs(i,{"data-invalid":r.invalid,children:[e.jsx(a,{htmlFor:"two_fa_type",children:"2FA Type"}),e.jsx(v,{value:String(s.value??""),options:D,placeholder:"Select 2FA Type",onChange:d=>s.onChange(Number(d)),onBlur:s.onBlur,className:"dark:bg-dark-900"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{className:"col-span-full",children:e.jsx(L,{className:"my-4"})}),e.jsx("div",{children:e.jsx(t,{name:"address_line_1",control:n,render:({field:s,fieldState:r})=>e.jsxs(i,{"data-invalid":r.invalid,children:[e.jsx(a,{htmlFor:"address_line_1",children:"Address Line 1"}),e.jsx(l,{...s,type:"text",id:"address_line_1",name:"address_line_1",placeholder:"Enter address line 1"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(t,{name:"address_line_2",control:n,render:({field:s,fieldState:r})=>e.jsxs(i,{"data-invalid":r.invalid,children:[e.jsx(a,{htmlFor:"address_line_2",children:"Address Line 2"}),e.jsx(l,{...s,type:"text",id:"address_line_2",name:"address_line_2",placeholder:"Enter address line 2 (optional)"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(t,{name:"address_line_3",control:n,render:({field:s,fieldState:r})=>e.jsxs(i,{"data-invalid":r.invalid,children:[e.jsx(a,{htmlFor:"address_line_3",children:"Address Line 3"}),e.jsx(l,{...s,type:"text",id:"address_line_3",name:"address_line_3",placeholder:"Enter address line 3 (optional)"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(t,{name:"city",control:n,render:({field:s,fieldState:r})=>e.jsxs(i,{"data-invalid":r.invalid,children:[e.jsx(a,{htmlFor:"city",children:"City"}),e.jsx(l,{...s,type:"text",id:"city",name:"city",placeholder:"Enter city"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(t,{name:"county",control:n,render:({field:s,fieldState:r})=>e.jsxs(i,{"data-invalid":r.invalid,children:[e.jsx(a,{htmlFor:"county",children:"County"}),e.jsx(l,{...s,type:"text",id:"county",name:"county",placeholder:"Enter county"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(t,{name:"country",control:n,render:({field:s,fieldState:r})=>e.jsxs(i,{"data-invalid":r.invalid,children:[e.jsx(a,{htmlFor:"country",children:"Country"}),e.jsx(l,{...s,type:"text",id:"country",name:"country",placeholder:"Enter country"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(t,{name:"postcode",control:n,render:({field:s,fieldState:r})=>e.jsxs(i,{"data-invalid":r.invalid,children:[e.jsx(a,{htmlFor:"postcode",children:"Postcode"}),e.jsx(l,{...s,type:"text",id:"postcode",name:"postcode",placeholder:"Enter postcode"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})})]})})}),!u&&e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(x,{variant:"danger",onClick:()=>h(-1),children:"Cancel"}),!o&&e.jsx(x,{variant:"outline",onClick:()=>m(),children:"Reset"}),e.jsx(x,{type:"submit",form:"form-ipc",children:o?"Update":"Submit"})]})]})]})}export{X as default};
