import{j as e,B as n,u as j,r as m,S as y}from"./index-Bd_g5yr_.js";import{B as v,A as N,u as w,D as b,M as k}from"./index-CZzhE_lX.js";import{P as D}from"./PageBreadCrumb-CllaJxAj.js";import{d as C,f as z}from"./user_api-PKsQpawz.js";import"./table-Crs5lvSB.js";import"./utils-HNMyEq71.js";import"./index-BT1M0go5.js";import"./index-YGHbPIAQ.js";const U=(r,d,t)=>[{accessorKey:"salutation",accessorFn:s=>s.user_info.salutation,header:()=>e.jsx("div",{className:"ml-4",children:"Salutation"}),cell:({row:s})=>e.jsxs("div",{className:"capitalize dark:text-white ml-4",children:[s.getValue("salutation"),"."]})},{accessorKey:"firstname",accessorFn:s=>s.firstname,header:()=>e.jsx("div",{className:"ml-4",children:"Firstname"}),cell:({row:s})=>e.jsx("div",{className:"capitalize dark:text-white ml-4",children:s.getValue("firstname")})},{accessorKey:"lastname",accessorFn:s=>s.lastname,header:()=>e.jsx("div",{className:"ml-4",children:"Lastname"}),cell:({row:s})=>e.jsx("div",{className:"capitalize dark:text-white ml-4",children:s.getValue("lastname")})},{accessorKey:"email",accessorFn:s=>s.email,header:({column:s})=>e.jsxs(v,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["Email",e.jsx(N,{})]}),cell:({row:s})=>e.jsx("div",{className:" dark:text-white ml-4",children:s.getValue("email")})},{accessorKey:"mobile",accessorFn:s=>s.user_info.mobile,header:()=>e.jsx("div",{className:"ml-4",children:"Mobile"}),cell:({row:s})=>e.jsx("div",{className:"capitalize dark:text-white ml-4",children:s.getValue("mobile")})},{accessorKey:"type",accessorFn:s=>s.user_type.type,header:()=>e.jsx("div",{className:"ml-4",children:"User Type"}),cell:({row:s})=>e.jsx("div",{className:"capitalize dark:text-white ml-4",children:s.getValue("type")})},{accessorKey:"address",header:()=>e.jsx("div",{className:"ml-4",children:"Address"}),cell:({row:s})=>e.jsxs("div",{className:"capitalize dark:text-white ml-4",children:[s.original.user_info.city,", ",s.original.user_info.country,","," ",s.original.user_info.postcode]})},{id:"actions",header:()=>e.jsx("div",{children:"Actions"}),cell:({row:s})=>{const a=s.original,i=l=>{r(`/users/edit/${l}`)},c=l=>{d(l),t()};return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{onClick:()=>i(a.id),variant:"primary",size:"sm",children:"Edit"}),e.jsx(n,{onClick:()=>c(a.id),variant:"danger",size:"sm",children:"Delete"})]})}}];function M(){const r=j(),[d,t]=m.useState(!1),[s,a]=m.useState(null),[i,c]=m.useState(!1),{data:l,isLoading:h,refetch:x}=w({queryKey:["user-data"],queryFn:async()=>await z(),refetchInterval:1e3*60*5,refetchIntervalInBackground:!0,staleTime:500,gcTime:2e4}),u=o=>{a(o),t(!0)},g=async()=>{if(s!==null){c(!0);try{await C(s),await x(),t(!1),a(null)}catch(o){console.error("Error deleting IPC:",o)}finally{c(!1)}}},f=()=>{i||(t(!1),a(null))},p=U(r,u,x);return e.jsxs(e.Fragment,{children:[e.jsx(D,{pageTitle:"Users"}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white px-5 pb-5 pt-5 dark:border-gray-800 dark:bg-white/[0.03] sm:px-6 sm:pt-6",children:[e.jsxs("div",{className:"flex flex-col gap-5 mb-6 sm:flex-row sm:justify-between",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white/90",children:"Users"}),e.jsx("p",{className:"mt-1 text-gray-500 text-theme-sm dark:text-gray-400",children:"List of all Users and their details."})]}),e.jsx("div",{className:"flex shrink-0 items-center gap-2",children:e.jsx(n,{size:"sm",onClick:()=>r("/users/new"),children:"Add New User"})})]}),e.jsx("div",{className:"max-w-full overflow-x-auto custom-scrollbar",children:e.jsx("div",{className:"min-w-[1000px] xl:min-w-full px-2",children:!h&&l?e.jsx(b,{columns:p,data:l}):e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(y,{size:"lg"})})})})]})}),e.jsx(k,{isOpen:d,onClose:f,className:"w-lg m-4",children:e.jsx("div",{className:"relative w-full p-4 overflow-y-auto bg-white no-scrollbar rounded-3xl dark:bg-gray-900 lg:p-11",children:e.jsxs("div",{className:"px-2 pr-14",children:[e.jsx("h4",{className:"mb-2 text-2xl font-semibold text-gray-800 dark:text-white/90",children:"Delete Confirmation"}),e.jsx("p",{className:"mb-6 text-sm text-gray-500 dark:text-gray-400 lg:mb-7",children:"Are you sure to delete this User?"}),e.jsx(n,{size:"sm",variant:"danger",onClick:()=>g(),children:i?"Deleting...":"Confirm Delete"})]})})})]})}export{M as default};
