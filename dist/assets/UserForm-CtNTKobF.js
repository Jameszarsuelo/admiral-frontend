import{d as F,u as C,r as _,j as e,S as E,L as n,I as d,B as h,t as U}from"./index-Bd_g5yr_.js";import{u as B,a as k,h as y,F as w,C as l,b as t}from"./external-QyOfrcf0.js";import{P}from"./PageBreadCrumb-CllaJxAj.js";import{C as T}from"./ComponentCard-CuEWkNls.js";import{S as c,P as L,a as A}from"./Switch-BirVSo3m.js";import{U as M,S as O}from"./UserFormSchema-X7zWze6p.js";import{a as R,u as V}from"./user_api-PKsQpawz.js";import"./index-YGHbPIAQ.js";import"./utils-HNMyEq71.js";import"./index-BT1M0go5.js";const z=[{code:"UK",label:"+44"},{code:"PH",label:"+63 "}],D=[{value:0,label:"SMS"},{value:1,label:"Email"}],G=[{value:"mr",label:"Mr."},{value:"ms",label:"Ms."},{value:"mrs",label:"Mrs."},{value:"dr",label:"Dr."}],g=[{value:1,label:"Admin"},{value:2,label:"Supervisor"}],S=()=>{const{id:o}=F(),p=C(),[j,u]=_.useState(!1),{handleSubmit:b,control:a,formState:v,setError:m,reset:x}=B({defaultValues:{salutation:"",firstname:"",lastname:"",email:"",phone:"",mobile:"+44",two_fa_enabled:!1,two_fa_type:0,user_type_id:1,user_profile_id:1,address_line_1:"",address_line_2:"",address_line_3:"",city:"",county:"",country:"",postcode:""},resolver:k(M)});_.useEffect(()=>{o&&(u(!0),R(o).then(s=>{const r=s.user_info;x({id:s.id,firstname:s.firstname,lastname:s.lastname,email:s.email,two_fa_enabled:!!s.two_fa_enabled,two_fa_type:s.two_fa_type,user_type_id:s.user_type_id,user_profile_id:s.user_profile_id,salutation:(r==null?void 0:r.salutation)||"",phone:(r==null?void 0:r.phone)||"",mobile:(r==null?void 0:r.mobile)||"",address_line_1:(r==null?void 0:r.address_line_1)||"",address_line_2:(r==null?void 0:r.address_line_2)||"",address_line_3:(r==null?void 0:r.address_line_3)||"",city:(r==null?void 0:r.city)||"",county:(r==null?void 0:r.county)||"",country:(r==null?void 0:r.country)||"",postcode:(r==null?void 0:r.postcode)||""})}).catch(s=>y(s,m)).finally(()=>{u(!1)}))},[o,x,m]);const N=async s=>{try{U.promise(V(s),{loading:o?"Updating User...":"Creating User...",success:()=>(setTimeout(()=>{p("/users")},2e3),o?"User updated successfully":"User created successfully!"),error:r=>y(r,m)})}catch(r){console.log("Error upon Submitting",r)}};return e.jsxs(e.Fragment,{children:[e.jsx(P,{pageTitle:"User"}),e.jsxs(T,{title:o?"Edit User":"Add User",children:[j?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(E,{size:"lg"})}):e.jsx("form",{id:"form-user",onSubmit:b(N),children:e.jsx(w,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-6 ",children:[e.jsx("div",{children:e.jsx(l,{name:"salutation",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"salutation",children:"Salutation"}),e.jsx(c,{value:s.value,options:G,placeholder:"Select Salutation",onChange:i=>s.onChange(i),onBlur:s.onBlur,className:"dark:bg-dark-900"}),v.errors.salutation&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:v.errors.salutation.message})]})})}),e.jsx("div",{children:e.jsx(l,{name:"firstname",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"input",children:"First Name"}),e.jsx(d,{...s,type:"text",id:"input",name:"firstname",placeholder:"Enter first name"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(l,{name:"lastname",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"lastname",children:"Last Name"}),e.jsx(d,{...s,type:"text",id:"lastname",name:"lastname",placeholder:"Enter last name"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(l,{name:"email",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"input",children:"Email"}),e.jsx(d,{...s,type:"text",id:"input",name:"email",placeholder:"e.g. john@test.com"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(l,{name:"mobile",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"input",children:"Mobile"}),e.jsx(L,{value:s.value,countries:z,selectPosition:"start",placeholder:"+1 (555) 000-0000",onChange:i=>{s.onChange(i)},onBlur:s.onBlur}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(l,{name:"phone",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"phone",children:"Phone"}),e.jsx(d,{...s,type:"text",id:"phone",name:"phone",placeholder:"Enter phone number"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(l,{name:"two_fa_enabled",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"input",children:"Multi-factor authentication"}),e.jsx(A,{checked:s.value,onCheckedChange:s.onChange,label:"Enable multi-factor authentication to secure your account."})]})})}),e.jsx("div",{children:e.jsx(l,{name:"two_fa_type",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"two_fa_type",children:"2FA Type"}),e.jsx(c,{value:String(s.value??""),options:D,placeholder:"Select 2FA Type",onChange:i=>s.onChange(i),onBlur:s.onBlur,className:"dark:bg-dark-900"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(l,{name:"user_type_id",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"user_type_id",children:"User Type"}),e.jsx(c,{value:String(s.value??""),options:g.map(i=>({value:String(i.value),label:i.label})),placeholder:"Select User Type",onChange:i=>s.onChange(Number(i)),onBlur:s.onBlur,className:"dark:bg-dark-900"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(l,{name:"user_profile_id",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"user_profile_id",children:"User Profile"}),e.jsx(c,{value:String(s.value??""),options:g.map(i=>({value:String(i.value),label:i.label})),placeholder:"Select Profile Type",onChange:i=>s.onChange(Number(i)),onBlur:s.onBlur,className:"dark:bg-dark-900"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{className:"col-span-full",children:e.jsx(O,{className:"my-4"})}),e.jsx("div",{children:e.jsx(l,{name:"address_line_1",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"address_line_1",children:"Address Line 1"}),e.jsx(d,{...s,type:"text",id:"address_line_1",name:"address_line_1",placeholder:"Enter address line 1"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(l,{name:"address_line_2",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"address_line_2",children:"Address Line 2"}),e.jsx(d,{...s,type:"text",id:"address_line_2",name:"address_line_2",placeholder:"Enter address line 2 (optional)"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(l,{name:"address_line_3",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"address_line_3",children:"Address Line 3"}),e.jsx(d,{...s,type:"text",id:"address_line_3",name:"address_line_3",placeholder:"Enter address line 3 (optional)"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(l,{name:"city",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"city",children:"City"}),e.jsx(d,{...s,type:"text",id:"city",name:"city",placeholder:"Enter city"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(l,{name:"county",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"county",children:"County"}),e.jsx(d,{...s,type:"text",id:"county",name:"county",placeholder:"Enter county"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(l,{name:"country",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"country",children:"Country"}),e.jsx(d,{...s,type:"text",id:"country",name:"country",placeholder:"Enter country"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})}),e.jsx("div",{children:e.jsx(l,{name:"postcode",control:a,render:({field:s,fieldState:r})=>e.jsxs(t,{"data-invalid":r.invalid,children:[e.jsx(n,{htmlFor:"postcode",children:"Postcode"}),e.jsx(d,{...s,type:"text",id:"postcode",name:"postcode",placeholder:"Enter postcode"}),r.error&&e.jsx("p",{className:"mt-1 text-sm text-error-500",children:r.error.message})]})})})]})})}),!j&&e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(h,{variant:"danger",onClick:()=>p(-1),children:"Cancel"}),!o&&e.jsx(h,{variant:"outline",onClick:()=>x(),children:"Reset"}),e.jsx(h,{type:"submit",form:"form-user",children:o?"Update":"Submit"})]})]})]})};export{S as default};
